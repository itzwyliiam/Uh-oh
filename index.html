<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UR HISTORY</title>

<style>
html, body {
  margin:0;
  padding:0;
  height:auto;
  min-height:100%;
  overflow-x:hidden;
  overflow-y:auto;
}

body {
  background:black;
  color:lime;
  font-family:"Courier New", monospace;
  text-align:center;
  animation:flash 0.15s infinite;
}

@keyframes flash {
  0% {background:black;}
  50% {background:#030;}
  100% {background:black;}
}

#terminal {
  width:90%;
  max-height:300px;
  overflow-y:auto;
  overflow-x:hidden;
  background:#010101;
  border:2px solid lime;
  margin:20px auto;
  padding:10px;
  text-align:left;
}

#map {
  width:90%;
  height:300px;
  border:5px dashed lime;
  margin:25px auto;
}

#video {
  width:80%;
  margin:20px auto;
  border:3px solid red;
}
</style>
</head>
<body>

<h1>⚠️ UH OH... UR HISTORY ⚠️</h1>
<h2>YOUR DEVICE HAS BEEN COMPROMISED!!!</h2>

<!-- TERMINAL -->
<div id="terminal"></div>

<!-- MAP -->
<div id="map"></div>

<!-- CAMERA -->
<video id="video" autoplay playsinline></video>

<script>
// ================= TERMINAL HELPER =================
const termDiv = document.getElementById("terminal");
function term(text){
  termDiv.innerHTML += "> " + text + "<br>";
  termDiv.scrollTop = termDiv.scrollHeight;
}

// ================= START HACK SIM =================
window.onload = () => {
  vibratePhone();
  collectInfo();
  loadCamera();
  loadLocation();
};

// ================= VIBRATION =================
function vibratePhone(){
  if(navigator.vibrate){
    navigator.vibrate([300,100,300,100,500]);
    setInterval(()=>navigator.vibrate([200,100,200]),4000);
  }
}

// ================= DEVICE + IP INFO =================
function collectInfo(){
  term("Collecting IP address...");
  fetch("https://ipwho.is/")
    .then(r=>r.json())
    .then(data=>{
      term("IP Address: " + data.ip);
      term("Country: " + data.country);
      term("Region: " + data.region);
      term("City: " + data.city);
      term("ISP: " + data.connection.isp);
      term("Timezone: " + data.timezone.id);
    });

  term("Browser: " + navigator.userAgent);
  term("Platform: " + navigator.platform);

  if(navigator.getBattery){
    navigator.getBattery().then(b=>{
      term("Battery: " + Math.floor(b.level*100) + "% (Charging: " + b.charging + ")");
    });
  }

  const conn = navigator.connection || {};
  term("Network: " + (conn.effectiveType || "Unknown") + " — Downlink: " + (conn.downlink || "Unknown") + " Mbps");

  term("Tracking initiated...");
}

// ================= CAMERA =================
function loadCamera(){
  term("Requesting camera access...");

  navigator.mediaDevices.getUserMedia({video:true})
    .then(stream=>{
      document.getElementById("video").srcObject = stream;
      term("Camera feed acquired.");
    })
    .catch(()=>{
      term("Camera access denied.");
    });
}

// ================= LOCATION + MAP =================
function loadLocation(){
  term("Requesting GPS location...");

  navigator.geolocation.getCurrentPosition(
    pos=>{
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      term("GPS LOCKED:");
      term("Latitude: " + lat);
      term("Longitude: " + lon);
      showMap(lat, lon);
    },
    err=>{
      term("GPS denied. Using IP location...");
      fetch("https://ipwho.is/")
        .then(r=>r.json())
        .then(data=>{
          showMap(data.latitude, data.longitude);
        });
    },
    {enableHighAccuracy:true, timeout:5000}
  );
}

function showMap(lat, lon){
  document.getElementById("map").innerHTML = `
    <iframe
      width="100%" height="100%" style="border:0"
      src="https://www.openstreetmap.org/export/embed.html?bbox=${lon-0.02}%2C${lat-0.02}%2C${lon+0.02}%2C${lat+0.02}&layer=mapnik&marker=${lat}%2C${lon}">
    </iframe>
  `;
  term("Map loaded. Device tracked.");
}
</script>

</body>
</html>